rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Permite que qualquer pessoa leia receitas, perfis de usuário e o ranking.
    // A escrita ainda é bloqueada para todos, exceto se especificado abaixo.
    match /recipes/{recipeId} {
      allow read: if true;
      allow write: if request.auth != null; // Apenas usuários logados podem escrever
    }

    match /users/{userId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId; // Um usuário só pode editar seu próprio perfil
    }

    match /weeklyRanking/{userId} {
      allow read: if true;
      allow write: if request.auth != null; // Apenas usuários logados podem escrever
    }

    // Regra de exemplo para conteúdo que SÓ usuários logados podem ver
    match /privateContent/{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
